document.addEventListener("DOMContentLoaded",(function(){if(window.innerWidth<576){let y=0,b=document.querySelector(".header");window.addEventListener("scroll",(function(){let e=window.pageYOffset||document.documentElement.scrollTop,t=document.querySelector(".header__content");b.style.top=e>y?"-100px":"0";let o=document.querySelectorAll(".header__nav-link");e>0?(t.style.background="rgba(255, 255, 255, 0.8)",t.style.color="black",o.forEach((e=>e.classList.add("header__nav-link--hover")))):(t.style.color="white",t.style.background="rgba(255, 255, 255, 0.1)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",o.forEach((e=>e.classList.remove("header__nav-link--hover")))),y=e}))}const e=document.querySelector(".header__burger"),t=document.querySelector(".header__close"),o=document.querySelector(".header__nav");if(e.addEventListener("click",(function(){o.style.display="flex",e.style.display="none",t.style.display="block"})),t.addEventListener("click",(function(){o.style.display="none",t.style.display="none",e.style.display="block"})),window.innerWidth<936){let f=document.querySelectorAll(".header__nav a");for(let v=0;v<f.length;v++)f[v].addEventListener("click",(function(){document.querySelector(".header__nav").style.display="none",document.querySelector(".header__burger").style.display="block",document.querySelector(".header__close").style.display="none"}))}let n,i,r,l=document.getElementById("heroModal"),s=document.querySelector(".hero__video"),a=document.querySelector(".hero__modal-close");if(s.onclick=function(e){e.preventDefault();let t=document.createElement("iframe");t.width="258",t.height="382",t.src="https://www.youtube.com/embed/aMcq3T0188c",t.frameborder="0",t.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,document.getElementById("videoContainer").appendChild(t),l.style.display="block"},a.onclick=function(){l.style.display="none",document.getElementById("videoContainer").innerHTML=""},window.onclick=function(e){e.target==l&&(l.style.display="none",document.getElementById("videoContainer").innerHTML="")},window.innerWidth<936)n=new Swiper(".about__swiper-container",{slidesPerView:"auto",spaceBetween:25,centeredSlides:!0,loop:!0,navigation:{nextEl:".about__swiper-button-next",prevEl:".about__swiper-button-prev"},pagination:{el:".about__swiper-pagination",clickable:!0}});else{let S=document.querySelectorAll(".about__swiper-slide"),x=document.querySelectorAll(".scroll-section__content");S.length===x.length?S.forEach(((e,t)=>{x[t].innerHTML=e.innerHTML})):console.error("Количество источников и целей не совпадает"),gsap.registerPlugin(ScrollTrigger);const k=document.querySelector(".main");k.setAttribute("data-scroll-container","");const E=new LocomotiveScroll({el:k,smooth:!0,getDirection:!0,lerp:.07});function c(e,t){console.log("Updating pagination for slide",e);document.querySelectorAll(".scroll-section__pagination-dot").forEach(((o,n)=>{n===e&&t?o.classList.add("scroll-section__pagination-dot--active"):n===e&&o.classList.remove("scroll-section__pagination-dot--active")}))}E.on("scroll",ScrollTrigger.update),ScrollTrigger.scrollerProxy(k,{scrollTop(e){return arguments.length?E.scrollTo(e,0,0):E.scroll.instance.scroll.y},getBoundingClientRect:()=>({left:0,top:0,width:window.innerWidth,height:window.innerHeight}),pinType:k.style.transform?"transform":"fixed"}),document.querySelectorAll(".horizontal-scroll").forEach(((e,t)=>{let o=e.querySelector(".pin-wrap"),n=o.offsetWidth,i=n-window.innerWidth;gsap.to(o,{scrollTrigger:{scroller:"[data-scroll-container]",scrub:!0,trigger:e,pin:!0,start:"top top",end:()=>`+=${n}`,invalidateOnRefresh:!0,onEnter:()=>{c(t,!0)},onLeave:()=>{c(t,!1)},onEnterBack:()=>c(t,!0),onLeaveBack:()=>c(t,!1)},x:-i,ease:"none"})}));const L=document.querySelectorAll("[data-bgcolor]");L.forEach(((e,t)=>{const o=0===t?"":L[t-1].dataset.bgcolor,n=0===t?"":L[t-1].dataset.textcolor;ScrollTrigger.create({trigger:e,scroller:"[data-scroll-container]",start:"top 50%",onEnter:()=>gsap.to("body",{backgroundColor:e.dataset.bgcolor,color:e.dataset.textcolor,overwrite:"auto"}),onLeaveBack:()=>gsap.to("body",{backgroundColor:o,color:n,overwrite:"auto"})})}));let q=document.querySelector(".header__content"),T=document.querySelectorAll(".header__nav-link");const H=gsap.from(".header",{yPercent:-100,paused:!0,duration:.2}).progress(1);ScrollTrigger.create({start:"top top",end:99999,scroller:"[data-scroll-container]",onUpdate:e=>{-1===e.direction?(H.play(),q.style.background="rgba(255, 255, 255, 0.8)",q.style.color="black",T.forEach((e=>e.classList.add("header__nav-link--hover")))):(H.reverse(),q.style.background="rgba(255, 255, 255, 0.1)",q.style.color="white",T.forEach((e=>e.classList.remove("header__nav-link--hover"))))}});let A=document.querySelector(".main"),M={attributes:!0,childList:!1,subtree:!1,attributeFilter:["style"]};new MutationObserver((function(e,t){for(let t of e)if("attributes"===t.type&&"style"===t.attributeName){"transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); opacity: 1; pointer-events: all;"===A.getAttribute("style")&&(q.style.background="rgba(255, 255, 255, 0.1)",q.style.color="white",T.forEach((e=>e.classList.remove("header__nav-link--hover"))))}})).observe(A,M),ScrollTrigger.addEventListener("refresh",(()=>E.update())),ScrollTrigger.refresh()}i=window.innerWidth<936?new Swiper(".school-fotos__swiper-container",{initialSlide:1,slidesPerView:1,centeredSlides:!0,loop:!0,spaceBetween:30,navigation:{nextEl:".school-fotos__swiper-button-next",prevEl:".school-fotos__swiper-button-prev"}}):new Swiper(".school-fotos__swiper-container",{initialSlide:2,slidesPerView:3,centeredSlides:!0,loop:!1,loopedSlides:3,spaceBetween:30,speed:500,effect:"slide",navigation:{nextEl:".school-fotos__swiper-button-next",prevEl:".school-fotos__swiper-button-prev"},autoplay:{delay:2500,disableOnInteraction:!1}}),Fancybox.bind("[data-fancybox]",{Toolbar:!1,ClickSlide:"close"}),r=window.innerWidth<936?new Swiper(".program__swiper-container",{slidesPerView:"auto",spaceBetween:10,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,sticky:!0}):new Swiper(".program__swiper-container",{slidesPerView:"auto",spaceBetween:0,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,sticky:!0});let d=document.querySelectorAll(".program__tab-pane"),p=document.querySelectorAll(".program__tab-header"),u=document.querySelector(".program__img"),_=["../images/program-img-lg-1.jpg","../images/program-img-lg-1.jpg","../images/program-img-lg-1.jpg","../images/program-img-lg-1.jpg"];d[0].style.display="block",p[0].classList.add("program__tab-header--active"),u.src=_[0],window.innerWidth<936?p.forEach((function(e,t){e.addEventListener("click",(function(){for(let e=0;e<d.length;e++)e===t?(d[e].style.display="block",p[e].classList.add("program__tab-header--active"),u.src=_[e]):(d[e].style.display="none",p[e].classList.remove("program__tab-header--active"))}))})):p.forEach((function(e,t){e.addEventListener("click",(function(){for(let e=0;e<d.length;e++)e===t?(d[e].style.display="block",p[e].classList.add("program__tab-header--active"),p[e].classList.add("program__tab-header-"+(e+1)+"--active")):(d[e].style.display="none",p[e].classList.remove("program__tab-header--active"),p[e].classList.remove("program__tab-header-"+(e+1)+"--active"))}))}));let h,m=new Swiper(".timetable__swiper-container",{slidesPerView:"auto",spaceBetween:10,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,sticky:!0}),g=document.querySelectorAll(".timetable__tab-pane"),w=document.querySelectorAll(".timetable__tab-header");if(w.forEach(((e,t)=>{e.addEventListener("click",(()=>{m.slideTo(t),g.forEach(((e,o)=>{e.style.display=o===t?"block":"none",w[o].classList.toggle("timetable__tab-header--active",o===t)}))}))})),window.innerWidth<936){document.querySelectorAll(".timetable-daily__swiper-container").forEach((function(e){new Swiper(e,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,navigation:{nextEl:".timetable-daily__swiper-button-next",prevEl:".timetable-daily__swiper-button-prev"}})}))}if(window.onload=function(){g[0].style.display="block",w[0].classList.add("timetable__tab-header--active")},window.innerWidth<936){let C=document.getElementsByClassName("vision__button");for(let B=0;B<C.length;B++)C[B].addEventListener("click",(function(){let e=document.querySelector(".vision__button--active");e&&e!=this&&(e.classList.remove("vision__button--active"),e.nextElementSibling.style.maxHeight=null,e.innerHTML=e.innerHTML.replace("-","+")),this.classList.toggle("vision__button--active");let t=this.nextElementSibling;t.style.maxHeight?(t.style.maxHeight=null,this.innerHTML=this.innerHTML.replace("-","+")):(t.style.maxHeight=t.scrollHeight+"px",this.innerHTML=this.innerHTML.replace("+","-"))}))}else{$(document).ready((function(){$(".vision__carousel").slick({vertical:!0,slidesToShow:6,slidesToScroll:1,autoplay:!0,autoplaySpeed:0,speed:1e3,pauseOnHover:!0,arrows:!1,dots:!1,infinite:!0})}));const P=document.querySelector(".vision__title"),W=document.querySelector(".vision__carousel-title");P&&W&&(W.textContent=P.textContent);const V=document.querySelectorAll(".vision__carousel-item"),O=document.querySelectorAll(".vision__button");V.forEach(((e,t)=>{O[t]&&(e.textContent=O[t].textContent),e.addEventListener("click",(()=>{const e=document.querySelector(".vision__carousel-description"),o=document.querySelector(".vision__carousel-title");O[t]&&e&&o&&(e.textContent=O[t].nextElementSibling.textContent,o.textContent=O[t].textContent)}))}))}window.innerWidth<936?h=new Swiper(".people__swiper-container",{slidesPerView:"auto",spaceBetween:50,centeredSlides:!0,loop:!0,navigation:{nextEl:".people__swiper-button-next",prevEl:".people__swiper-button-prev"},pagination:{el:".people__swiper-pagination",clickable:!0}}):document.querySelector(".people__show-more").addEventListener("click",(function(){let e=document.querySelectorAll(".people__swiper-slide.people__swiper-slide--hidden"),t=document.querySelector(".people__show-more");if("Свернуть"===t.textContent){let e=document.querySelectorAll(".people__swiper-slide:not(.people__swiper-slide--hidden)");for(let t=3;t<e.length;t++)e[t].classList.add("people__swiper-slide--hidden");t.textContent="Еще смотреть",document.getElementById("people__swiper-wrapper").scrollIntoView({behavior:"smooth"})}else{for(let t=0;t<3;t++)e[t]&&e[t].classList.remove("people__swiper-slide--hidden");0===document.querySelectorAll(".people__swiper-slide.people__swiper-slide--hidden").length&&(t.textContent="Свернуть")}})),$(document).ready((function(){$(".testimonials__slider").slick({dots:!1,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,infinite:!0,arros:!0,nextArrow:$(".testimonials__arrow--next"),prevArrow:$(".testimonials__arrow--prev"),responsive:[{breakpoint:963,settings:{slidesToShow:2,slidesToScroll:2,arros:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,arrows:!0,nextArrow:$(".testimonials__arrow--next"),prevArrow:$(".testimonials__arrow--prev")}}]})}))})),$(".expander__wrapper").each((function(){let e,t=$(this).find(".expander__text");let o=parseFloat(t.css("line-height"))*(window.innerWidth<936?9:8),n=$('<button class="expander__button">Читать далее</button>');t.after(n),t.css("overflow","hidden"),t.css("height",o+"px"),n.on("click",(function(){e=t.prop("scrollHeight"),t.height()>o?(t.animate({height:o+"px"}),$(this).text("Читать далее")):(t.animate({height:e+"px"}),$(this).text("Свернуть"))})),n.on("blur",(function(){t.height()>o&&(t.animate({height:o+"px"}),n.text("Читать далее"))}))})),$(".expander__wrapper--4-5").each((function(){let e,t=$(this).find(".expander__text--4-5");let o=parseFloat(t.css("line-height"))*(window.innerWidth<936?4:5),n=$('<button class="expander__button--4-5">Читать далее</button>');t.after(n),t.css("overflow","hidden"),t.css("height",o+"px"),n.on("click",(function(){e=t.prop("scrollHeight"),t.height()>o?(t.animate({height:o+"px"}),$(this).text("Читать далее")):(t.animate({height:e+"px"}),$(this).text("Свернуть"))})),n.on("blur",(function(){t.height()>o&&(t.animate({height:o+"px"}),n.text("Читать далее"))}))}));const acc=document.getElementsByClassName("questions__button");for(let e=0;e<acc.length;e++)acc[e].addEventListener("click",(function(){const e=document.querySelector(".questions__button--active");e&&e!=this&&(e.classList.remove("questions__button--active"),e.nextElementSibling.style.maxHeight=null,e.innerHTML=e.innerHTML.replace("-","+")),this.classList.toggle("questions__button--active");const t=this.nextElementSibling;t.style.maxHeight?(t.style.maxHeight=null,this.innerHTML=this.innerHTML.replace("-","+")):(t.style.maxHeight=t.scrollHeight+"px",this.innerHTML=this.innerHTML.replace("+","-"))}));let footerSwiper,numOfSlides=document.querySelectorAll(".footer__news-slide").length,numOfSlidesToAdd=numOfSlides%2;function init(){var e=new ymaps.Map("map",{center:[59.961691,30.308902],zoom:17,controls:[],behaviors:["drag"]}),t=new ymaps.Placemark([59.961691,30.308902],{},{iconLayout:"default#image",iconImageHref:"../images/footer-map-placemarker.svg",iconImageSize:[52,75],iconImageOffset:[-26,-75]});e.geoObjects.add(t);let o=document.querySelector(".modal-contact"),n=document.querySelectorAll(".form-button"),i=document.querySelector(".modal-contact__close-btn"),r=document.querySelector(".header");n.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),o.style.display="block",r.style.display="none"}))})),i.onclick=function(){o.style.display="none",r.style.display="block"},window.onclick=function(e){e.target==o&&(o.style.display="none")}}window.innerWidth<936?footerSwiper=new Swiper(".footer__news-swiper",{slidesPerView:1,spaceBetween:30,centeredSlides:!0,loop:!0,navigation:{nextEl:".footer__slider-arrow--next",prevEl:".footer__slider-arrow--prev"}}):$(document).ready((function(){$(".footer__slick-slider").slick({infinite:!0,slidesToShow:2,slidesToScroll:1,dots:!1,arrows:!0,nextArrow:$(".footer__slick-arrow"),prevArrow:!1,autoplay:!1,autoplaySpeed:2e3})})),ymaps.ready(init);