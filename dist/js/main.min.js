document.addEventListener("DOMContentLoaded",(function(){if(window.innerWidth<576){let e=0,t=document.querySelector(".header");window.addEventListener("scroll",(function(){let o=window.pageYOffset||document.documentElement.scrollTop,n=document.querySelector(".header__content");t.style.top=o>e?"-100px":"0";let r=document.querySelectorAll(".header__nav-link");o>0?(n.style.background="rgba(255, 255, 255, 0.8)",n.style.color="black",r.forEach((e=>e.classList.add("header__nav-link--hover")))):(n.style.color="white",n.style.background="rgba(255, 255, 255, 0.1)",n.style.backdropFilter="blur(10px)",n.style.webkitBackdropFilter="blur(10px)",r.forEach((e=>e.classList.remove("header__nav-link--hover")))),e=o}))}const e=document.querySelector(".header__burger"),t=document.querySelector(".header__close"),o=document.querySelector(".header__nav");if(e.addEventListener("click",(function(){o.style.display="flex",e.style.display="none",t.style.display="block"})),t.addEventListener("click",(function(){o.style.display="none",t.style.display="none",e.style.display="block"})),window.innerWidth<936){let e=document.querySelectorAll(".header__nav a");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){document.querySelector(".header__nav").style.display="none",document.querySelector(".header__burger").style.display="block",document.querySelector(".header__close").style.display="none"}))}let n,r,i,l=document.getElementById("heroModal"),s=document.querySelector(".hero__video"),a=document.querySelector(".hero__modal-close");if(s.onclick=function(e){e.preventDefault();let t=document.createElement("iframe");t.width="258",t.height="382",t.src="https://www.youtube.com/embed/aMcq3T0188c",t.frameborder="0",t.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,document.getElementById("videoContainer").appendChild(t),l.style.display="block"},a.onclick=function(){l.style.display="none",document.getElementById("videoContainer").innerHTML=""},window.onclick=function(e){e.target==l&&(l.style.display="none",document.getElementById("videoContainer").innerHTML="")},window.innerWidth<936)n=new Swiper(".about__swiper-container",{slidesPerView:"auto",spaceBetween:25,centeredSlides:!0,loop:!0,navigation:{nextEl:".about__swiper-button-next",prevEl:".about__swiper-button-prev"},pagination:{el:".about__swiper-pagination",clickable:!0}});else{let e=document.querySelectorAll(".about__swiper-slide"),t=document.querySelectorAll(".scroll-section__content");e.length===t.length?e.forEach(((e,o)=>{t[o].innerHTML=e.innerHTML})):console.error("Количество источников и целей не совпадает"),gsap.registerPlugin(ScrollTrigger);const o=document.querySelector(".main");o.setAttribute("data-scroll-container","");const n=new LocomotiveScroll({el:o,smooth:!0,getDirection:!0,lerp:.07});n.on("scroll",ScrollTrigger.update),ScrollTrigger.scrollerProxy(o,{scrollTop(e){return arguments.length?n.scrollTo(e,0,0):n.scroll.instance.scroll.y},getBoundingClientRect:()=>({left:0,top:0,width:window.innerWidth,height:window.innerHeight}),pinType:o.style.transform?"transform":"fixed"}),document.querySelectorAll(".horizontal-scroll").forEach(((e,t)=>{let o=e.querySelector(".pin-wrap"),r=o.offsetWidth,i=r-window.innerWidth;gsap.to(o,{scrollTrigger:{scroller:"[data-scroll-container]",scrub:!0,trigger:e,pin:!0,start:"top top",end:()=>`+=${r}`,invalidateOnRefresh:!0},x:-i,ease:"none"});const l=e.querySelector(".custom-cursor");let s=0,a=0,c=0,d=null;function p(){const t=document.elementFromPoint(s,a);if(t&&t.closest(".horizontal-scroll")){const t=e.getBoundingClientRect().top,o=e.querySelector(".pin-wrap"),n=window.getComputedStyle(o).getPropertyValue("transform"),r=Number(n.split(",")[4].trim()),c=Math.abs(r)/i*100;let p=0;p=c<=2||c>=97?"up"===d?-90:90:"up"===d?-180:0,l.style.transform=`translate(-50%, -50%) rotate(${p}deg)`,l.style.left=s+"px",l.style.top=a-t+"px",l.style.display="block",l.classList.add("custom-cursor--active"),e.style.cursor="none",e.style.overflow="visible"}else l.style.display="none",l.classList.remove("custom-cursor--active"),e.style.overflow="hidden"}window.addEventListener("mousemove",(function(e){s=e.clientX,a=e.clientY,p()})),n.on("scroll",(e=>{d=c>e.scroll.y?"up":"down",c=e.scroll.y,p()}))}));const r=document.querySelectorAll("[data-bgcolor]");r.forEach(((e,t)=>{const o=0===t?"":r[t-1].dataset.bgcolor,n=0===t?"":r[t-1].dataset.textcolor;ScrollTrigger.create({trigger:e,scroller:"[data-scroll-container]",start:"top 50%",onEnter:()=>gsap.to("body",{backgroundColor:e.dataset.bgcolor,color:e.dataset.textcolor,overwrite:"auto"}),onLeaveBack:()=>gsap.to("body",{backgroundColor:o,color:n,overwrite:"auto"})})}));let i=document.querySelector(".header__content"),l=document.querySelectorAll(".header__nav-link");const s=gsap.from(".header",{yPercent:-100,paused:!0,duration:.2}).progress(1);ScrollTrigger.create({start:"top top",end:99999,scroller:"[data-scroll-container]",onUpdate:e=>{-1===e.direction?(s.play(),i.style.background="rgba(255, 255, 255, 0.8)",i.style.color="black",l.forEach((e=>e.classList.add("header__nav-link--hover")))):(s.reverse(),i.style.background="rgba(255, 255, 255, 0.1)",i.style.color="white",l.forEach((e=>e.classList.remove("header__nav-link--hover"))))}});let a=document.querySelector(".main"),c={attributes:!0,childList:!1,subtree:!1,attributeFilter:["style"]};new MutationObserver((function(e,t){for(let t of e)if("attributes"===t.type&&"style"===t.attributeName){"transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); opacity: 1; pointer-events: all;"===a.getAttribute("style")&&(i.style.background="rgba(255, 255, 255, 0.1)",i.style.color="white",l.forEach((e=>e.classList.remove("header__nav-link--hover"))))}})).observe(a,c),ScrollTrigger.addEventListener("refresh",(()=>n.update())),ScrollTrigger.refresh()}r=window.innerWidth<936?new Swiper(".school-fotos__swiper-container",{initialSlide:1,slidesPerView:1,centeredSlides:!0,loop:!0,spaceBetween:30,navigation:{nextEl:".school-fotos__swiper-button-next",prevEl:".school-fotos__swiper-button-prev"}}):new Swiper(".school-fotos__swiper-container",{initialSlide:2,slidesPerView:3,centeredSlides:!0,loop:!1,loopedSlides:3,spaceBetween:30,speed:500,effect:"slide",navigation:{nextEl:".school-fotos__swiper-button-next",prevEl:".school-fotos__swiper-button-prev"},autoplay:{delay:2500,disableOnInteraction:!1}}),Fancybox.bind("[data-fancybox]",{Toolbar:!1,ClickSlide:"close"}),i=window.innerWidth<936?new Swiper(".program__swiper-container",{slidesPerView:"auto",spaceBetween:10,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,sticky:!0}):new Swiper(".program__swiper-container",{slidesPerView:"auto",spaceBetween:0,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,sticky:!0});let c=document.querySelectorAll(".program__tab-pane"),d=document.querySelectorAll(".program__tab-header"),p=document.querySelector(".program__img"),u=["../images/program-img-lg-1.jpg","../images/program-img-lg-1.jpg","../images/program-img-lg-1.jpg","../images/program-img-lg-1.jpg"];c[0].style.display="block",d[0].classList.add("program__tab-header--active"),p.src=u[0],window.innerWidth<936?d.forEach((function(e,t){e.addEventListener("click",(function(){for(let e=0;e<c.length;e++)e===t?(c[e].style.display="block",d[e].classList.add("program__tab-header--active"),p.src=u[e]):(c[e].style.display="none",d[e].classList.remove("program__tab-header--active"))}))})):d.forEach((function(e,t){e.addEventListener("click",(function(){for(let e=0;e<c.length;e++)e===t?(c[e].style.display="block",d[e].classList.add("program__tab-header--active"),d[e].classList.add("program__tab-header-"+(e+1)+"--active")):(c[e].style.display="none",d[e].classList.remove("program__tab-header--active"),d[e].classList.remove("program__tab-header-"+(e+1)+"--active"))}))}));let _,h=new Swiper(".timetable__swiper-container",{slidesPerView:"auto",spaceBetween:10,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,sticky:!0}),m=document.querySelectorAll(".timetable__tab-pane"),y=document.querySelectorAll(".timetable__tab-header");if(y.forEach(((e,t)=>{e.addEventListener("click",(()=>{h.slideTo(t),m.forEach(((e,o)=>{e.style.display=o===t?"block":"none",y[o].classList.toggle("timetable__tab-header--active",o===t)}))}))})),window.innerWidth<936){document.querySelectorAll(".timetable-daily__swiper-container").forEach((function(e){new Swiper(e,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,navigation:{nextEl:".timetable-daily__swiper-button-next",prevEl:".timetable-daily__swiper-button-prev"}})}))}if(window.onload=function(){m[0].style.display="block",y[0].classList.add("timetable__tab-header--active")},window.innerWidth<936){let e=document.getElementsByClassName("vision__button");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){let e=document.querySelector(".vision__button--active");e&&e!=this&&(e.classList.remove("vision__button--active"),e.nextElementSibling.style.maxHeight=null,e.innerHTML=e.innerHTML.replace("-","+")),this.classList.toggle("vision__button--active");let t=this.nextElementSibling;t.style.maxHeight?(t.style.maxHeight=null,this.innerHTML=this.innerHTML.replace("-","+")):(t.style.maxHeight=t.scrollHeight+"px",this.innerHTML=this.innerHTML.replace("+","-"))}))}else{$(document).ready((function(){$(".vision__carousel").slick({vertical:!0,slidesToShow:6,slidesToScroll:1,autoplay:!0,autoplaySpeed:0,speed:1e3,pauseOnHover:!0,arrows:!1,dots:!1,infinite:!0})}));const e=document.querySelector(".vision__title"),t=document.querySelector(".vision__carousel-title");e&&t&&(t.textContent=e.textContent);const o=document.querySelectorAll(".vision__carousel-item"),n=document.querySelectorAll(".vision__button");o.forEach(((e,t)=>{n[t]&&(e.textContent=n[t].textContent),e.addEventListener("click",(()=>{const e=document.querySelector(".vision__carousel-description"),o=document.querySelector(".vision__carousel-title");n[t]&&e&&o&&(e.textContent=n[t].nextElementSibling.textContent,o.textContent=n[t].textContent)}))}))}window.innerWidth<936?_=new Swiper(".people__swiper-container",{slidesPerView:"auto",spaceBetween:50,centeredSlides:!0,loop:!0,navigation:{nextEl:".people__swiper-button-next",prevEl:".people__swiper-button-prev"},pagination:{el:".people__swiper-pagination",clickable:!0}}):document.querySelector(".people__show-more").addEventListener("click",(function(){let e=document.querySelectorAll(".people__swiper-slide.people__swiper-slide--hidden"),t=document.querySelector(".people__show-more");if("Свернуть"===t.textContent){let e=document.querySelectorAll(".people__swiper-slide:not(.people__swiper-slide--hidden)");for(let t=3;t<e.length;t++)e[t].classList.add("people__swiper-slide--hidden");t.textContent="Еще смотреть",document.getElementById("people__swiper-wrapper").scrollIntoView({behavior:"smooth"})}else{for(let t=0;t<3;t++)e[t]&&e[t].classList.remove("people__swiper-slide--hidden");0===document.querySelectorAll(".people__swiper-slide.people__swiper-slide--hidden").length&&(t.textContent="Свернуть")}})),$(document).ready((function(){$(".testimonials__slider").slick({dots:!1,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,infinite:!0,arros:!0,nextArrow:$(".testimonials__arrow--next"),prevArrow:$(".testimonials__arrow--prev"),responsive:[{breakpoint:963,settings:{slidesToShow:2,slidesToScroll:2,arros:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,arrows:!0,nextArrow:$(".testimonials__arrow--next"),prevArrow:$(".testimonials__arrow--prev")}}]})}))})),$(".expander__wrapper").each((function(){let e,t=$(this).find(".expander__text");let o=parseFloat(t.css("line-height"))*(window.innerWidth<936?9:8),n=$('<button class="expander__button">Читать далее</button>');t.after(n),t.css("overflow","hidden"),t.css("height",o+"px"),n.on("click",(function(){e=t.prop("scrollHeight"),t.height()>o?(t.animate({height:o+"px"}),$(this).text("Читать далее")):(t.animate({height:e+"px"}),$(this).text("Свернуть"))})),n.on("blur",(function(){t.height()>o&&(t.animate({height:o+"px"}),n.text("Читать далее"))}))})),$(".expander__wrapper--4-5").each((function(){let e,t=$(this).find(".expander__text--4-5");let o=parseFloat(t.css("line-height"))*(window.innerWidth<936?4:5),n=$('<button class="expander__button--4-5">Читать далее</button>');t.after(n),t.css("overflow","hidden"),t.css("height",o+"px"),n.on("click",(function(){e=t.prop("scrollHeight"),t.height()>o?(t.animate({height:o+"px"}),$(this).text("Читать далее")):(t.animate({height:e+"px"}),$(this).text("Свернуть"))})),n.on("blur",(function(){t.height()>o&&(t.animate({height:o+"px"}),n.text("Читать далее"))}))}));const acc=document.getElementsByClassName("questions__button");for(let e=0;e<acc.length;e++)acc[e].addEventListener("click",(function(){const e=document.querySelector(".questions__button--active");e&&e!=this&&(e.classList.remove("questions__button--active"),e.nextElementSibling.style.maxHeight=null,e.innerHTML=e.innerHTML.replace("-","+")),this.classList.toggle("questions__button--active");const t=this.nextElementSibling;t.style.maxHeight?(t.style.maxHeight=null,this.innerHTML=this.innerHTML.replace("-","+")):(t.style.maxHeight=t.scrollHeight+"px",this.innerHTML=this.innerHTML.replace("+","-"))}));let footerSwiper,numOfSlides=document.querySelectorAll(".footer__news-slide").length,numOfSlidesToAdd=numOfSlides%2;function init(){var e=new ymaps.Map("map",{center:[59.961691,30.308902],zoom:17,controls:[],behaviors:["drag"]}),t=new ymaps.Placemark([59.961691,30.308902],{},{iconLayout:"default#image",iconImageHref:"../images/footer-map-placemarker.svg",iconImageSize:[52,75],iconImageOffset:[-26,-75]});e.geoObjects.add(t);let o=document.querySelector(".modal-contact"),n=document.querySelectorAll(".form-button"),r=document.querySelector(".modal-contact__close-btn"),i=document.querySelector(".header");n.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),o.style.display="block",i.style.display="none"}))})),r.onclick=function(){o.style.display="none",i.style.display="block"},window.onclick=function(e){e.target==o&&(o.style.display="none")}}window.innerWidth<936?footerSwiper=new Swiper(".footer__news-swiper",{slidesPerView:1,spaceBetween:30,centeredSlides:!0,loop:!0,navigation:{nextEl:".footer__slider-arrow--next",prevEl:".footer__slider-arrow--prev"}}):$(document).ready((function(){$(".footer__slick-slider").slick({infinite:!0,slidesToShow:2,slidesToScroll:1,dots:!1,arrows:!0,nextArrow:$(".footer__slick-arrow"),prevArrow:!1,autoplay:!1,autoplaySpeed:2e3})})),ymaps.ready(init);